"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[306],{306:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var r=n(629);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const i={name:"ClientShow",props:["client"],data:function(){return{currentTab:"bookings",filterBookings:"all",journalData:{client_id:this.$route.params.id,journal_content:""}}},methods:a(a({},(0,r.nv)({BOOKINGS_DESTROY_HANDLE:"clients/BOOKINGS_DESTROY_HANDLE",JOURNALS_STORE_HANDLE:"clients/JOURNALS_STORE_HANDLE",JOURNALS_DESTROY_HANDLE:"clients/JOURNALS_DESTROY_HANDLE"})),{},{switchTab:function(t){this.currentTab=t},deleteBooking:function(t){var e=this;this.BOOKINGS_DESTROY_HANDLE(t).then((function(t){e.$toasted.success(t.data.message),e.$emit("refreshData",e.filterBookings)})).catch((function(t){e.displayErrors(t)}))},deleteJournal:function(t){var e=this;this.JOURNALS_DESTROY_HANDLE(t).then((function(t){e.$toasted.success(t.data.message),e.$emit("refreshData",e.filterBookings)})).catch((function(t){e.displayErrors(t)}))},createJournal:function(){var t=this;this.clearErrors(),this.JOURNALS_STORE_HANDLE(this.journalData).then((function(e){t.$toasted.success(e.data.message),t.$emit("refreshData",t.filterBookings)})).catch((function(e){t.displayErrors(e)}))},refreshData:function(){this.$emit("refreshData",this.filterBookings)}})};var l=n(900);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const v={components:{ClientShow:(0,l.Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",{staticClass:"mb-6"},[t._v(t._s("Clients")+" -> "+t._s(t.client.name))]),t._v(" "),n("div",{staticClass:"flex"},[n("div",{staticClass:"w-1/3 mr-5"},[n("div",{staticClass:"w-full bg-white rounded p-4"},[n("h2",[t._v(t._s("Client Info"))]),t._v(" "),n("table",[n("tbody",[n("tr",[n("th",{staticClass:"text-gray-600 pr-3"},[t._v(t._s("Name"))]),t._v(" "),n("td",[t._v(t._s(t.client.name))])]),t._v(" "),n("tr",[n("th",{staticClass:"text-gray-600 pr-3"},[t._v(t._s("Email"))]),t._v(" "),n("td",[t._v(t._s(t.client.email))])]),t._v(" "),n("tr",[n("th",{staticClass:"text-gray-600 pr-3"},[t._v(t._s("Phone"))]),t._v(" "),n("td",[t._v(t._s(t.client.phone))])]),t._v(" "),n("tr",[n("th",{staticClass:"text-gray-600 pr-3"},[t._v(t._s("Address"))]),t._v(" "),n("td",[t._v(t._s(t.client.address)),n("br"),t._v(t._s(t.client.postcode+" "+t.client.city))])])])])])]),t._v(" "),n("div",{staticClass:"w-2/3"},[n("div",[n("button",{staticClass:"btn",class:{"btn-primary":"bookings"==t.currentTab,"btn-default":"bookings"!=t.currentTab},on:{click:function(e){return t.switchTab("bookings")}}},[t._v(t._s("Bookings"))]),t._v(" "),n("button",{staticClass:"btn",class:{"btn-primary":"journals"==t.currentTab,"btn-default":"journals"!=t.currentTab},on:{click:function(e){return t.switchTab("journals")}}},[t._v(t._s("Journals"))])]),t._v(" "),"bookings"==t.currentTab?n("div",{staticClass:"bg-white rounded p-4"},[n("h3",{staticClass:"mb-3"},[t._v(t._s("List of client bookings"))]),t._v(" "),t.client.bookings&&t.client.bookings.length>0?[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"exampleFormControlSelect1"}},[t._v(t._s("Filter bookings"))]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.filterBookings,expression:"filterBookings"}],staticClass:"form-control",attrs:{id:"filterBookings"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.filterBookings=e.target.multiple?n:n[0]},t.refreshData]}},[n("option",{attrs:{value:"all"}},[t._v(t._s("All bookings"))]),t._v(" "),n("option",{attrs:{value:"future"}},[t._v(t._s("Future Bookings only"))]),t._v(" "),n("option",{attrs:{value:"past"}},[t._v(t._s("Past bookings only"))])])]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v(t._s("Time"))]),t._v(" "),n("th",[t._v(t._s("Notes"))]),t._v(" "),n("th",[t._v(t._s("Actions"))])])]),t._v(" "),n("tbody",t._l(t.client.bookings,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.start)+" to "+t._s(e.end))]),t._v(" "),n("td",[t._v(t._s(e.notes))]),t._v(" "),n("td",[n("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(n){return t.deleteBooking(e.id)}}},[t._v(t._s("Delete"))])])])})),0)])]:[n("p",{staticClass:"text-center"},[t._v(t._s("The client has no bookings."))])]],2):t._e(),t._v(" "),"journals"==t.currentTab?n("div",{staticClass:"bg-white rounded p-4"},[n("h3",{staticClass:"mb-3"},[t._v(t._s("List of client journals"))]),t._v(" "),n("h3",{staticClass:"mb-6"},[t._v(t._s("Add new journal"))]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"journal_content"}},[t._v(t._s("Journal content"))]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.journalData.journal_content,expression:"journalData.journal_content"}],staticClass:"form-control",attrs:{rows:"5",id:"journal_content"},domProps:{value:t.journalData.journal_content},on:{input:function(e){e.target.composing||t.$set(t.journalData,"journal_content",e.target.value)}}}),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"text-right"},[n("button",{staticClass:"btn btn-primary",on:{click:t.createJournal}},[t._v(t._s("Create journal"))])]),t._v(" "),t.client.journals&&t.client.journals.length>0?[n("table",[n("thead",[n("tr",[n("th",[t._v(t._s("Date"))]),t._v(" "),n("th",[t._v(t._s("Content"))]),t._v(" "),n("th",[t._v(t._s("Actions"))])])]),t._v(" "),n("tbody",t._l(t.client.journals,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.journal_date))]),t._v(" "),n("td",[t._v(t._s(e.journal_content))]),t._v(" "),n("td",[n("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(n){return t.deleteJournal(e.id)}}},[t._v(t._s("Delete"))])])])})),0)])]:[n("p",{staticClass:"text-center"},[t._v(t._s("The client has no journals."))])]],2):t._e()])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"invalid-feedback",attrs:{role:"alert"}},[e("strong")])}],!1,null,null,null).exports},data:function(){return{client:{}}},beforeMount:function(){this.getClient()},methods:u(u({},(0,r.nv)({CLIENTS_SHOW_HANDLE:"clients/CLIENTS_SHOW_HANDLE"})),{},{getClient:function(t){var e=this;t||(t="all"),this.CLIENTS_SHOW_HANDLE({id:this.$route.params.id,filter:t}).then((function(t){e.client=t.data.data})).catch((function(t){e.$router.push({name:"clients"}),e.displayErrors(t)}))}})};const f=(0,l.Z)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid"},[n("client-show",{attrs:{client:t.client},on:{refreshData:t.getClient}})],1)}),[],!1,null,null,null).exports}}]);